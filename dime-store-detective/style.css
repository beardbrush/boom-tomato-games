*{margin:0;padding:0;box-sizing:border-box;}

html, body{
  height:100%;
}

body{
  min-height:100vh;
  min-height:100svh;
  background:#050814;
  color:#e5e7eb;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;

  display:flex;
  align-items:center;
  justify-content:center;

  padding: env(safe-area-inset-top) env(safe-area-inset-right)
           env(safe-area-inset-bottom) env(safe-area-inset-left);

  overflow:hidden;
}

/* Main game card: responsive */
.game{
  position:relative;

  width:min(1100px, calc(100vw - 24px));
  height:min(650px, calc(100svh - 24px));

  background:radial-gradient(circle at 20% 10%, #1f2937 0, #020617 55%);
  box-shadow:0 40px 120px rgba(0,0,0,.9);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.35);
  margin:auto;
}

/* Detective canvas (left) */
#detective{
  position:absolute;
  top:160px;
  left:-360px; /* off-screen start */
  width:300px;
  height:400px;
  image-rendering:pixelated;
  transition:left .7s ease-out, opacity .7s ease-out;
  filter:drop-shadow(0 0 24px #000a);
  opacity:0;
}
#detective.visible{
  left:60px;
  opacity:1;
}

/* Right-side canvas (suspect OR Wren) */
#suspect{
  position:absolute;
  top:80px;
  right:40px;
  image-rendering:pixelated;
  filter:drop-shadow(0 0 24px #000a);
}

/* Top controls */
#suspectTabs{
  position:absolute;
  top:32px;
  right:160px;
  display:none; /* hidden so players only use Directory */
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-end;
  max-width:50%;
}

.suspect-tab{
  padding:6px 12px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.6);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  font-size:.8rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
  opacity:.6;
  transition:.15s;
}
.suspect-tab:hover{ opacity:.9; background:#111827; }
.suspect-tab.active{
  opacity:1;
  background:#1e293b;
  border-color:rgba(148,163,184,.9);
}

#topLeftButtons{
  position:absolute;
  top:32px;
  left:40px;
  display:flex;
  gap:8px;
  align-items:center;
  z-index:5;
}

.small-btn{
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.6);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  font-size:.78rem;
  letter-spacing:.06em;
  text-transform:uppercase;
  cursor:pointer;
  opacity:.8;
  transition:.15s;
  touch-action:manipulation;
}
.small-btn:hover{ opacity:1; background:#111827; }

/* Question list */
#questions{
  position:absolute;
  left:260px;
  right:400px;
  bottom:220px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:4;
}

.question-btn{
  padding:9px 12px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  text-align:left;
  font-size:.95rem;
  cursor:pointer;
  backdrop-filter:blur(10px);
  transition:background .15s, transform .05s;
  touch-action:manipulation;
}
.question-btn:hover:not(.used):not(:disabled){
  background:#111827;
  transform:translateY(-1px);
}
.question-btn.used,
.question-btn:disabled{
  opacity:.35;
  cursor:default;
}

/* Dialogue box */
.dialogue-box{
  position:absolute;
  left:220px;
  right:220px;
  bottom:40px;
  min-height:110px;
  padding:14px 18px;
  background:rgba(15,23,42,.92);
  border-radius:14px;
  border:1px solid rgba(51,65,85,.8);
  backdrop-filter:blur(16px);
  box-shadow:0 18px 60px rgba(0,0,0,.8);
  font-size:1.02rem;
  line-height:1.4rem;
  display:flex;
  flex-direction:column;
  gap:4px;
  z-index:4;
}

.dialogue-label{
  font-size:.8rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(148,163,184,.9);
}
.dialogue-text{ white-space:pre-wrap; }

/* Buttons right */
#audioBtn{
  position:absolute;
  top:28px;
  right:140px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.6);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  font-size:.8rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
  transition:.15s;
  z-index:6;
  touch-action:manipulation;
}
#audioBtn:hover{ background:#111827; }

#accuseBtn{
  position:absolute;
  top:28px;
  right:40px;
  padding:8px 16px;
  border-radius:999px;
  border:1px solid rgba(248,113,113,.8);
  background:rgba(127,29,29,.9);
  color:#fee2e2;
  font-size:.8rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
  transition:.15s;
  z-index:6;
  touch-action:manipulation;
}
#accuseBtn:hover:not(:disabled){ background:#b91c1c; }
#accuseBtn:disabled{ opacity:.4; cursor:default; }

#nextCaseBtn{
  position:absolute;
  top:70px;
  right:40px;
  padding:8px 14px;
  border-radius:999px;
  border:1px solid rgba(52,211,153,.8);
  background:rgba(6,95,70,.95);
  color:#ecfdf5;
  font-size:.8rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
  transition:.15s;
  display:none;
  z-index:6;
  touch-action:manipulation;
}
#nextCaseBtn:hover{ background:#047857; }

/* Accuse overlay */
#accuseOverlay{
  position:absolute;
  inset:0;
  background:rgba(15,23,42,.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:20;
}
#accuseOverlay.active{ display:flex; }

.accuse-panel{
  width:min(420px, calc(100vw - 28px));
  padding:18px 20px;
  background:rgba(15,23,42,.98);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.8);
  box-shadow:0 24px 100px rgba(0,0,0,.9);
  display:flex;
  flex-direction:column;
  gap:12px;
}

.accuse-title{
  font-size:.9rem;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(148,163,184,.9);
}
.accuse-row{ display:flex; flex-direction:column; gap:8px; }

.accuse-btn{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.7);
  background:#020617;
  color:#e5e7eb;
  text-align:left;
  cursor:pointer;
  transition:.15s;
  touch-action:manipulation;
}
.accuse-btn:hover{ background:#111827; }

.accuse-footer{ display:flex; justify-content:flex-end; }

.ghost-btn{
  background:transparent;
  border:none;
  color:rgba(148,163,184,.85);
  font-size:.8rem;
  cursor:pointer;
  touch-action:manipulation;
}

/* Directory overlay */
#directoryOverlay{
  position:absolute;
  inset:0;
  background:linear-gradient(to bottom, rgba(15,23,42,.96), rgba(15,23,42,.92));
  display:none;
  flex-direction:column;
  padding:28px 40px;
  z-index:15;
}
#directoryOverlay.active{ display:flex; }

.directory-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}
.directory-title{
  font-size:.9rem;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(148,163,184,.95);
}
.directory-close{
  background:transparent;
  border:none;
  color:rgba(148,163,184,.85);
  font-size:.8rem;
  cursor:pointer;
  touch-action:manipulation;
}

.directory-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px 18px;
  overflow-y:auto;
  padding-bottom:12px;
}

.directory-card{
  display:flex;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(51,65,85,.9);
  background:radial-gradient(circle at 0 0, rgba(148,163,184,.12), rgba(15,23,42,.98));
}

.directory-avatar{
  width:40px;
  height:40px;
  border-radius:8px;
  background:rgba(15,23,42,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.75rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  border:1px solid rgba(148,163,184,.5);
}

.directory-main{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:2px;
}

.directory-name{
  font-size:.82rem;
  letter-spacing:.12em;
  text-transform:uppercase;
}
.directory-job{
  font-size:.76rem;
  color:rgba(148,163,184,.95);
}
.directory-loc{
  font-size:.72rem;
  color:rgba(148,163,184,.8);
}
.directory-tagline{
  font-size:.75rem;
  color:rgba(209,213,219,.95);
  margin-top:2px;
}

.directory-status{
  margin-top:4px;
  font-size:.7rem;
  display:inline-flex;
  align-items:center;
  gap:6px;
  color:rgba(148,163,184,.9);
}
.directory-status-pill{
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.5);
  font-size:.66rem;
  text-transform:uppercase;
  letter-spacing:.08em;
  background:rgba(15,23,42,.9);
}

.directory-footer-row{
  margin-top:4px;
  display:flex;
  justify-content:flex-end;
}

.directory-interview{
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.7);
  background:#020617;
  color:#e5e7eb;
  font-size:.7rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
  touch-action:manipulation;
}
.directory-interview:hover{ background:#111827; }

/* Toast */
#toast{
  position:absolute;
  top:92px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(2,6,23,.92);
  border:1px solid rgba(148,163,184,.45);
  color:#e5e7eb;
  padding:10px 12px;
  border-radius:999px;
  font-size:.78rem;
  letter-spacing:.06em;
  display:flex;
  gap:10px;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:opacity .2s, transform .2s;
  z-index:50;
  backdrop-filter:blur(10px);
}
#toast.show{
  opacity:1;
  pointer-events:auto;
  transform:translateX(-50%) translateY(2px);
}
#toast button{
  pointer-events:auto;
  border:1px solid rgba(148,163,184,.45);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  padding:4px 10px;
  border-radius:999px;
  font-size:.72rem;
  text-transform:uppercase;
  letter-spacing:.06em;
  cursor:pointer;
  touch-action:manipulation;
}
#toast button:hover{ background:#111827; }

/* Mobile tightening */
@media (max-width: 820px){
  #questions{ left:18px; right:18px; bottom:200px; }
  .dialogue-box{ left:18px; right:18px; bottom:18px; }
  #suspect{ right:16px; top:70px; }
  #topLeftButtons{ left:16px; top:16px; }
  #accuseBtn{ right:16px; top:16px; }
  #audioBtn{ right:120px; top:16px; }
  #nextCaseBtn{ right:16px; top:58px; }

  #detective{ display:none; } /* saves space on small screens */
}
